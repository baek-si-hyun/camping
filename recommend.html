<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=375px, initial-scale=1.0">
  <title>AI 맞춤 추천 - ThankQ Camping</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">
  <!-- 카카오 지도 API -->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7c64a249ef8e3b9b648f20a50c07b249"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF7A45',
            secondary: '#4A90E2'
          },
          borderRadius: {
            'none': '0px',
            'sm': '4px',
            DEFAULT: '8px',
            'md': '12px',
            'lg': '16px',
            'xl': '20px',
            '2xl': '24px',
            '3xl': '32px',
            'full': '9999px',
            'button': '8px'
          }
        }
      }
    }
  </script>
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    .progress-bar {
      transition: width 0.3s ease;
    }

    .step-transition {
      transition: transform 0.3s ease, opacity 0.3s ease;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .step-hidden {
      transform: translateX(100%);
      opacity: 0;
      z-index: 0;
    }

    .step-visible {
      transform: translateX(0);
      opacity: 1;
      z-index: 10;
    }

    .step-slide-left {
      transform: translateX(-100%);
      opacity: 0;
      z-index: 0;
    }

    .result-card {
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }

      100% {
        transform: translateX(100%);
      }
    }

    /* 스크롤바 숨김 */
    ::-webkit-scrollbar {
      display: none;
    }

    * {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>

<body class="  min-h-[762px] mx-auto bg-gray-50">
  <header class="fixed top-0 left-0 right-0 z-50 bg-white shadow-sm">
    <div class="flex items-center justify-between px-4 py-3">
      <a href="#" onclick="event.preventDefault(); history.back();" data-readdy="true" data-readdy="true"
        class="w-8 h-8 flex items-center justify-center cursor-pointer">
        <i class="ri-arrow-left-line text-xl"></i>
      </a>
      <h1 class="text-lg font-medium absolute left-1/2 transform -translate-x-1/2">AI 맞춤 추천</h1>
      <div class="text-sm text-gray-500" id="progressText">1/5</div>
    </div>
    <div class="px-4 pb-2">
      <div class="w-full bg-gray-200 rounded-full h-1">
        <div class="bg-primary h-1 rounded-full progress-bar" id="progressBar" style="width: 20%"></div>
      </div>
    </div>
  </header>
  <main class="relative pt-20 pb-[76px] overflow-hidden h-screen">
    <div id="stepsWrapper" class="relative w-full h-full">
      <div id="step1" class="step-transition step-visible px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-group-line text-2xl text-primary"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">함께하는 인원을 선택해주세요</h2>
          <p class="text-gray-600 text-sm">여행 인원에 맞는 숙소를 추천해드릴게요</p>
        </div>
        <div class="space-y-3 mb-8">
          <button
            class="w-full p-4 bg-white rounded-xl border-2 border-gray-200 flex items-center justify-between cursor-pointer transition-all hover:border-primary"
            data-value="1인">
            <div class="flex items-center gap-3">
              <i class="ri-user-line text-xl text-gray-600"></i>
              <span class="font-medium">1인</span>
            </div>
            <i class="ri-check-line text-xl text-transparent"></i>
          </button>
          <button
            class="w-full p-4 bg-white rounded-xl border-2 border-gray-200 flex items-center justify-between cursor-pointer transition-all hover:border-primary"
            data-value="2인">
            <div class="flex items-center gap-3">
              <i class="ri-user-2-line text-xl text-gray-600"></i>
              <span class="font-medium">2인</span>
            </div>
            <i class="ri-check-line text-xl text-transparent"></i>
          </button>
          <button
            class="w-full p-4 bg-white rounded-xl border-2 border-gray-200 flex items-center justify-between cursor-pointer transition-all hover:border-primary"
            data-value="3-4인">
            <div class="flex items-center gap-3">
              <i class="ri-team-line text-xl text-gray-600"></i>
              <span class="font-medium">3-4인</span>
            </div>
            <i class="ri-check-line text-xl text-transparent"></i>
          </button>
          <button
            class="w-full p-4 bg-white rounded-xl border-2 border-gray-200 flex items-center justify-between cursor-pointer transition-all hover:border-primary"
            data-value="5인 이상">
            <div class="flex items-center gap-3">
              <i class="ri-group-2-line text-xl text-gray-600"></i>
              <span class="font-medium">5인 이상</span>
            </div>
            <i class="ri-check-line text-xl text-transparent"></i>
          </button>
        </div>
        <div class="bg-white rounded-xl mb-8">
          <label class="flex items-center gap-3 cursor-pointer transition-all p-4 w-full h-full" id="petLabel">
            <input type="checkbox" class="w-5 h-5 text-primary rounded border-gray-300" id="petCheckbox">
            <div class="flex items-center gap-2">
              <i class="ri-heart-3-line text-xl text-primary"></i>
              <span class="font-medium">반려동물과 함께 여행해요</span>
            </div>
          </label>
        </div>
        <div class="bg-white rounded-xl p-6 mb-8">
          <h3 class="font-medium mb-4">나의 MBTI를 선택해주세요</h3>
          <div class="grid grid-cols-2 gap-3">
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ISTJ">
              <p class="font-medium">ISTJ</p>
              <p class="text-xs text-gray-600">청렴결백한 논리주의자</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ISFJ">
              <p class="font-medium">ISFJ</p>
              <p class="text-xs text-gray-600">용감한 수호자</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="INFJ">
              <p class="font-medium">INFJ</p>
              <p class="text-xs text-gray-600">선의의 옹호자</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="INTJ">
              <p class="font-medium">INTJ</p>
              <p class="text-xs text-gray-600">용의주도한 전략가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ISTP">
              <p class="font-medium">ISTP</p>
              <p class="text-xs text-gray-600">만능 재주꾼</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ISFP">
              <p class="font-medium">ISFP</p>
              <p class="text-xs text-gray-600">호기심 많은 예술가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="INFP">
              <p class="font-medium">INFP</p>
              <p class="text-xs text-gray-600">열정적인 중재자</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="INTP">
              <p class="font-medium">INTP</p>
              <p class="text-xs text-gray-600">논리적인 사색가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ESTP">
              <p class="font-medium">ESTP</p>
              <p class="text-xs text-gray-600">모험을 즐기는 사업가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ESFP">
              <p class="font-medium">ESFP</p>
              <p class="text-xs text-gray-600">자유로운 영혼의 연예인</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ENFP">
              <p class="font-medium">ENFP</p>
              <p class="text-xs text-gray-600">재기발랄한 활동가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ENTP">
              <p class="font-medium">ENTP</p>
              <p class="text-xs text-gray-600">뜨거운 논쟁을 즐기는 변론가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ESTJ">
              <p class="font-medium">ESTJ</p>
              <p class="text-xs text-gray-600">엄격한 관리자</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ESFJ">
              <p class="font-medium">ESFJ</p>
              <p class="text-xs text-gray-600">사교적인 외교관</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ENFJ">
              <p class="font-medium">ENFJ</p>
              <p class="text-xs text-gray-600">정의로운 사회운동가</p>
            </button>
            <button
              class="p-3 bg-white rounded-xl text-center border-2 border-gray-200 cursor-pointer transition-all hover:border-primary mbti-btn"
              data-mbti="ENTJ">
              <p class="font-medium">ENTJ</p>
              <p class="text-xs text-gray-600">대담한 통솔자</p>
            </button>
          </div>
        </div>
      </div>
      <div id="step2" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-wallet-3-line text-2xl text-primary"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">1박당 예산을 선택해주세요</h2>
          <p class="text-gray-600 text-sm">예산에 맞는 최고의 숙소를 찾아드릴게요</p>
        </div>
        <div class="bg-white rounded-xl p-6 mb-8">
          <div class="text-center mb-6">
            <span class="text-3xl font-bold text-primary" id="budgetDisplay">15만원</span>
            <p class="text-sm text-gray-600 mt-1">1박당 예산</p>
          </div>
          <input type="range" min="5" max="50" value="15"
            class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" id="budgetSlider">
          <div class="flex justify-between text-xs text-gray-500 mt-2">
            <span>5만원</span>
            <span>50만원</span>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-3">
          <button
            class="p-3 bg-white rounded-xl text-center cursor-pointer border-2 border-gray-200 transition-all hover:border-primary"
            data-budget="10">
            <p class="font-medium">10만원</p>
            <p class="text-xs text-gray-600">경제적</p>
          </button>
          <button
            class="p-3 bg-white rounded-xl text-center cursor-pointer border-2 border-gray-200 transition-all hover:border-primary"
            data-budget="20">
            <p class="font-medium">20만원</p>
            <p class="text-xs text-gray-600">추천</p>
          </button>
          <button
            class="p-3 bg-white rounded-xl text-center cursor-pointer border-2 border-gray-200 transition-all hover:border-primary"
            data-budget="35">
            <p class="font-medium">35만원</p>
            <p class="text-xs text-gray-600">프리미엄</p>
          </button>
        </div>
      </div>
      <div id="step3" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-map-pin-2-line text-2xl text-primary"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">선호하는 지역을 선택해주세요</h2>
          <p class="text-gray-600 text-sm">여러 지역을 선택할 수 있어요</p>
        </div>
        <div class="bg-white rounded-xl">
          <div id="map" class="w-full h-48 rounded-lg mb-4" style="width: 100%; height: 192px;"></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="서울">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-4-line text-primary"></i>
              <span class="font-medium">서울</span>
            </div>
            <p class="text-xs text-gray-600">강남, 홍대, 명동</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="경기도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-line text-primary"></i>
              <span class="font-medium">경기도</span>
            </div>
            <p class="text-xs text-gray-600">가평, 양평, 포천</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="강원도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-mountain-line text-primary"></i>
              <span class="font-medium">강원도</span>
            </div>
            <p class="text-xs text-gray-600">춘천, 홍천, 평창</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="충청북도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-landscape-line text-primary"></i>
              <span class="font-medium">충청북도</span>
            </div>
            <p class="text-xs text-gray-600">청주, 충주, 제천</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="충청남도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-landscape-line text-primary"></i>
              <span class="font-medium">충청남도</span>
            </div>
            <p class="text-xs text-gray-600">천안, 아산, 공주</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="전라북도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-water-percent-line text-primary"></i>
              <span class="font-medium">전라북도</span>
            </div>
            <p class="text-xs text-gray-600">전주, 군산, 익산</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="전라남도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-water-percent-line text-primary"></i>
              <span class="font-medium">전라남도</span>
            </div>
            <p class="text-xs text-gray-600">여수, 순천, 광양</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="경상북도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-sun-line text-primary"></i>
              <span class="font-medium">경상북도</span>
            </div>
            <p class="text-xs text-gray-600">포항, 경주, 안동</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="경상남도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-sun-line text-primary"></i>
              <span class="font-medium">경상남도</span>
            </div>
            <p class="text-xs text-gray-600">창원, 진주, 통영</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="제주도">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-flight-takeoff-line text-primary"></i>
              <span class="font-medium">제주도</span>
            </div>
            <p class="text-xs text-gray-600">제주시, 서귀포시</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="부산">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-ship-line text-primary"></i>
              <span class="font-medium">부산</span>
            </div>
            <p class="text-xs text-gray-600">해운대, 광안리</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="대구">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-2-line text-primary"></i>
              <span class="font-medium">대구</span>
            </div>
            <p class="text-xs text-gray-600">수성구, 달서구</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="인천">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-ship-2-line text-primary"></i>
              <span class="font-medium">인천</span>
            </div>
            <p class="text-xs text-gray-600">송도, 영종도</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="광주">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-3-line text-primary"></i>
              <span class="font-medium">광주</span>
            </div>
            <p class="text-xs text-gray-600">충장로, 상무지구</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="대전">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-line text-primary"></i>
              <span class="font-medium">대전</span>
            </div>
            <p class="text-xs text-gray-600">유성구, 중구</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="울산">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-building-2-line text-primary"></i>
              <span class="font-medium">울산</span>
            </div>
            <p class="text-xs text-gray-600">남구, 동구</p>
          </button>
          <button
            class="p-4 bg-white rounded-xl border-2 border-gray-200 cursor-pointer transition-all hover:border-primary region-btn"
            data-region="세종">
            <div class="flex items-center gap-2 mb-2">
              <i class="ri-government-line text-primary"></i>
              <span class="font-medium">세종</span>
            </div>
            <p class="text-xs text-gray-600">새롬동, 도담동</p>
          </button>
        </div>
      </div>
      <div id="step4" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-tent-line text-2xl text-primary"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">선호하는 캠핑 스타일을 선택해주세요</h2>
          <p class="text-gray-600 text-sm">어떤 스타일의 여행을 원하시나요?</p>
        </div>
        <div class="space-y-4">
          <button
            class="w-full bg-white rounded-xl overflow-hidden border-2 border-gray-200 cursor-pointer transition-all hover:border-primary style-btn"
            data-style="캠핑">
            <div class="flex items-center p-4">
              <img
                src="https://readdy.ai/api/search-image?query=3D%20rendered%20camping%20tent%20icon%20with%20campfire%2C%20outdoor%20adventure%20style%2C%20minimalist%20design%2C%20soft%20gradient%20colors%2C%20flat%20style%20with%20depth%2C%20centered%20composition%2C%20clean%20white%20background%2C%20modern%20UI%20icon&width=80&height=80&seq=41&orientation=squarish"
                class="w-16 h-16 rounded-lg mr-4" alt="캠핑">
              <div class="flex-1 text-left">
                <h3 class="font-medium mb-1">캠핑</h3>
                <p class="text-sm text-gray-600">자연 속에서 텐트와 함께</p>
              </div>
              <i class="ri-check-line text-xl text-transparent"></i>
            </div>
          </button>
          <button
            class="w-full bg-white rounded-xl overflow-hidden border-2 border-gray-200 cursor-pointer transition-all hover:border-primary style-btn"
            data-style="글램핑">
            <div class="flex items-center p-4">
              <img
                src="https://readdy.ai/api/search-image?query=3D%20rendered%20luxury%20glamping%20dome%20tent%20icon%2C%20premium%20camping%20experience%2C%20minimalist%20design%2C%20soft%20gradient%20colors%2C%20flat%20style%20with%20depth%2C%20centered%20composition%2C%20clean%20white%20background%2C%20modern%20UI%20icon&width=80&height=80&seq=42&orientation=squarish"
                class="w-16 h-16 rounded-lg mr-4" alt="글램핑">
              <div class="flex-1 text-left">
                <h3 class="font-medium mb-1">글램핑</h3>
                <p class="text-sm text-gray-600">편안한 럭셔리 캠핑</p>
              </div>
              <i class="ri-check-line text-xl text-transparent"></i>
            </div>
          </button>
          <button
            class="w-full bg-white rounded-xl overflow-hidden border-2 border-gray-200 cursor-pointer transition-all hover:border-primary style-btn"
            data-style="카라반">
            <div class="flex items-center p-4">
              <img
                src="https://readdy.ai/api/search-image?query=3D%20rendered%20caravan%20trailer%20icon%2C%20mobile%20home%20camping%20style%2C%20minimalist%20design%2C%20soft%20gradient%20colors%2C%20flat%20style%20with%20depth%2C%20centered%20composition%2C%20clean%20white%20background%2C%20modern%20UI%20icon&width=80&height=80&seq=43&orientation=squarish"
                class="w-16 h-16 rounded-lg mr-4" alt="카라반">
              <div class="flex-1 text-left">
                <h3 class="font-medium mb-1">카라반</h3>
                <p class="text-sm text-gray-600">이동식 숙박 체험</p>
              </div>
              <i class="ri-check-line text-xl text-transparent"></i>
            </div>
          </button>
          <button
            class="w-full bg-white rounded-xl overflow-hidden border-2 border-gray-200 cursor-pointer transition-all hover:border-primary style-btn"
            data-style="펜션">
            <div class="flex items-center p-4">
              <img
                src="https://readdy.ai/api/search-image?query=3D%20rendered%20pension%20house%20icon%2C%20cozy%20accommodation%20building%2C%20minimalist%20design%2C%20soft%20gradient%20colors%2C%20flat%20style%20with%20depth%2C%20centered%20composition%2C%20clean%20white%20background%2C%20modern%20UI%20icon&width=80&height=80&seq=44&orientation=squarish"
                class="w-16 h-16 rounded-lg mr-4" alt="펜션">
              <div class="flex-1 text-left">
                <h3 class="font-medium mb-1">펜션</h3>
                <p class="text-sm text-gray-600">프라이빗한 독채 숙박</p>
              </div>
              <i class="ri-check-line text-xl text-transparent"></i>
            </div>
          </button>
        </div>
      </div>
      <div id="step5" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-heart-3-line text-2xl text-primary"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">추가 선호사항을 알려주세요</h2>
          <p class="text-gray-600 text-sm">더 정확한 추천을 위해 선택해주세요</p>
        </div>
        <div class="space-y-4">
          <div class="bg-white rounded-xl p-4">
            <h3 class="font-medium mb-3">선호하는 시설</h3>
            <div class="grid grid-cols-2 gap-3">
              <label class="flex items-center gap-2 cursor-pointer facility-label" id="facility-pool">
                <input type="checkbox" class="w-4 h-4 text-primary rounded facility-checkbox" value="수영장">
                <span class="text-sm">수영장</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer facility-label" id="facility-bbq">
                <input type="checkbox" class="w-4 h-4 text-primary rounded facility-checkbox" value="바베큐장">
                <span class="text-sm">바베큐장</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer facility-label" id="facility-wifi">
                <input type="checkbox" class="w-4 h-4 text-primary rounded facility-checkbox" value="와이파이">
                <span class="text-sm">와이파이</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer facility-label" id="facility-parking">
                <input type="checkbox" class="w-4 h-4 text-primary rounded facility-checkbox" value="주차장">
                <span class="text-sm">주차장</span>
              </label>
            </div>
          </div>
          <div class="bg-white rounded-xl p-4">
            <h3 class="font-medium mb-3">여행 목적</h3>
            <div class="space-y-2">
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="purpose" class="w-4 h-4 text-primary">
                <span class="text-sm">휴식 및 힐링</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="purpose" class="w-4 h-4 text-primary">
                <span class="text-sm">가족 여행</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="purpose" class="w-4 h-4 text-primary">
                <span class="text-sm">친구들과 모임</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="radio" name="purpose" class="w-4 h-4 text-primary">
                <span class="text-sm">커플 여행</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div id="aiAnalysisStep" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="h-full flex flex-col items-center justify-center">
          <div class="relative w-32 h-32 mb-6">
            <div class="absolute inset-0 border-4 border-primary/30 rounded-full"></div>
            <div
              class="absolute inset-0 border-4 border-primary rounded-full animate-[spin_2s_linear_infinite] border-t-transparent">
            </div>
            <div class="absolute inset-0 flex items-center justify-center">
              <i class="ri-brain-line text-4xl text-primary animate-pulse"></i>
            </div>
          </div>
          <h2 class="text-xl font-medium mb-2 animate-pulse">AI가 분석중입니다...</h2>
          <p class="text-gray-600 text-sm">잠시만 기다려주세요</p>
          <div class="mt-6 space-y-2 w-48">
            <div class="h-2 bg-primary/20 rounded-full overflow-hidden">
              <div class="w-full h-full bg-primary/40 rounded-full animate-[shimmer_1s_ease-in-out_infinite]"></div>
            </div>
            <div class="h-2 bg-primary/20 rounded-full overflow-hidden">
              <div class="w-3/4 h-full bg-primary/40 rounded-full animate-[shimmer_1s_ease-in-out_infinite]"></div>
            </div>
            <div class="h-2 bg-primary/20 rounded-full overflow-hidden">
              <div class="w-1/2 h-full bg-primary/40 rounded-full animate-[shimmer_1s_ease-in-out_infinite]"></div>
            </div>
          </div>
        </div>
      </div>
      <div id="resultStep" class="step-transition step-hidden px-4 h-full overflow-y-auto">
        <div class="text-center mb-8">
          <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="ri-brain-line text-2xl text-white"></i>
          </div>
          <h2 class="text-xl font-medium mb-2">AI 분석 완료!</h2>
          <p class="text-gray-600 text-sm">맞춤형 추천 결과를 확인해보세요</p>
        </div>
        <div class="bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-4 mb-6">
          <div class="flex items-center gap-3 mb-3">
            <i class="ri-user-star-line text-xl text-primary"></i>
            <span class="font-medium">분석 결과</span>
          </div>
          <div class="grid grid-cols-2 gap-3 text-sm">
            <div class="bg-white/70 rounded-lg p-2">
              <span class="text-gray-600">선호 스타일:</span>
              <span class="font-medium ml-1" id="resultStyle">글램핑</span>
            </div>
            <div class="bg-white/70 rounded-lg p-2">
              <span class="text-gray-600">예산:</span>
              <span class="font-medium ml-1" id="resultBudget">15만원</span>
            </div>
            <div class="bg-white/70 rounded-lg p-2">
              <span class="text-gray-600">인원:</span>
              <span class="font-medium ml-1" id="resultPeople">2인</span>
            </div>
            <div class="bg-white/70 rounded-lg p-2">
              <span class="text-gray-600">지역:</span>
              <span class="font-medium ml-1" id="resultRegion">경기도</span>
            </div>
          </div>
        </div>
        <div class="space-y-4">
          <a href="#" class="result-card bg-white rounded-xl overflow-hidden shadow-sm block cursor-pointer"
            data-title="가평 프리미엄 글램핑" data-region="경기도 가평군" data-price="180000" data-rating="4.8"
            data-description="자연 속 럭셔리 글램핑 체험" data-distance="차량 1시간" data-facilities="수영장,바베큐장,와이파이"
            data-image="https://readdy.ai/api/search-image?query=Luxury%20glamping%20tent%20with%20panoramic%20windows%20surrounded%20by%20forest%2C%20premium%20camping%20experience%2C%20cozy%20interior%20lighting%2C%20evening%20atmosphere%2C%20professional%20photography&width=800&height=400&seq=51&orientation=landscape"
            data-badge="AI 추천">
            <img
              src="https://readdy.ai/api/search-image?query=Luxury%20glamping%20tent%20with%20panoramic%20windows%20surrounded%20by%20forest%2C%20premium%20camping%20experience%2C%20cozy%20interior%20lighting%2C%20evening%20atmosphere%2C%20professional%20photography&width=800&height=400&seq=51&orientation=landscape"
              class="w-full h-48 object-cover" alt="추천 숙소">
            <div class="p-4">
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-medium">가평 프리미엄 글램핑</h3>
                <div class="flex items-center gap-1">
                  <i class="ri-star-fill text-yellow-400 text-sm"></i>
                  <span class="text-sm font-medium">4.8</span>
                </div>
              </div>
              <p class="text-sm text-gray-600 mb-2">자연 속 럭셔리 글램핑 체험</p>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm text-gray-500">
                  <i class="ri-map-pin-line"></i>
                  <span>경기도 가평군</span>
                </div>
                <span class="text-primary font-medium">180,000원~</span>
              </div>
            </div>
          </a>
          <a href="#" class="result-card bg-white rounded-xl overflow-hidden shadow-sm block cursor-pointer"
            data-title="양평 힐링 글램핑" data-region="경기도 양평군" data-price="150000" data-rating="4.6"
            data-description="계곡 옆 힐링 글램핑" data-distance="차량 50분" data-facilities="바베큐장,와이파이,주차장"
            data-image="https://readdy.ai/api/search-image?query=Modern%20glamping%20dome%20with%20mountain%20view%2C%20luxury%20outdoor%20accommodation%2C%20comfortable%20interior%20setup%2C%20sunset%20lighting%2C%20high-quality%20photography&width=800&height=400&seq=52&orientation=landscape"
            data-badge="인기">
            <img
              src="https://readdy.ai/api/search-image?query=Modern%20glamping%20dome%20with%20mountain%20view%2C%20luxury%20outdoor%20accommodation%2C%20comfortable%20interior%20setup%2C%20sunset%20lighting%2C%20high-quality%20photography&width=800&height=400&seq=52&orientation=landscape"
              class="w-full h-48 object-cover" alt="추천 숙소">
            <div class="p-4">
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-medium">양평 힐링 글램핑</h3>
                <div class="flex items-center gap-1">
                  <i class="ri-star-fill text-yellow-400 text-sm"></i>
                  <span class="text-sm font-medium">4.6</span>
                </div>
              </div>
              <p class="text-sm text-gray-600 mb-2">계곡 옆 힐링 글램핑</p>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm text-gray-500">
                  <i class="ri-map-pin-line"></i>
                  <span>경기도 양평군</span>
                </div>
                <span class="text-primary font-medium">150,000원~</span>
              </div>
            </div>
          </a>
          <a href="#" class="result-card bg-white rounded-xl overflow-hidden shadow-sm block cursor-pointer"
            data-title="포천 숲속 글램핑" data-region="경기도 포천시" data-price="160000" data-rating="4.7"
            data-description="숲속 프라이빗 글램핑" data-distance="차량 1시간 10분" data-facilities="바베큐장,와이파이"
            data-image="https://readdy.ai/api/search-image?query=Cozy%20glamping%20tent%20with%20private%20deck%2C%20forest%20setting%2C%20romantic%20atmosphere%2C%20warm%20interior%20lighting%2C%20couple-friendly%20accommodation&width=800&height=400&seq=53&orientation=landscape"
            data-badge="">
            <img
              src="https://readdy.ai/api/search-image?query=Cozy%20glamping%20tent%20with%20private%20deck%2C%20forest%20setting%2C%20romantic%20atmosphere%2C%20warm%20interior%20lighting%2C%20couple-friendly%20accommodation&width=800&height=400&seq=53&orientation=landscape"
              class="w-full h-48 object-cover" alt="추천 숙소">
            <div class="p-4">
              <div class="flex justify-between items-start mb-2">
                <h3 class="font-medium">포천 숲속 글램핑</h3>
                <div class="flex items-center gap-1">
                  <i class="ri-star-fill text-yellow-400 text-sm"></i>
                  <span class="text-sm font-medium">4.7</span>
                </div>
              </div>
              <p class="text-sm text-gray-600 mb-2">숲속 프라이빗 글램핑</p>
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm text-gray-500">
                  <i class="ri-map-pin-line"></i>
                  <span>경기도 포천시</span>
                </div>
                <span class="text-primary font-medium">160,000원~</span>
              </div>
            </div>
          </a>
        </div>
        <a href="#"
          class="w-full bg-primary text-white py-4 !rounded-button font-medium mt-6 cursor-pointer block text-center"
          onclick="goToResultList(); return false;">
          더 많은 추천 보기
        </a>
      </div>
  </main>
  <div class="fixed bottom-0 left-0 right-0 bg-white border-t px-4 py-3">
    <div class="flex items-center justify-between">
      <div class="flex gap-2">
        <div class="w-2 h-2 rounded-full bg-primary" id="dot1"></div>
        <div class="w-2 h-2 rounded-full bg-gray-300" id="dot2"></div>
        <div class="w-2 h-2 rounded-full bg-gray-300" id="dot3"></div>
        <div class="w-2 h-2 rounded-full bg-gray-300" id="dot4"></div>
        <div class="w-2 h-2 rounded-full bg-gray-300" id="dot5"></div>
      </div>
      <button id="nextBtn"
        class="px-6 py-2 bg-primary text-white !rounded-button font-medium cursor-pointer disabled:bg-gray-300 disabled:cursor-not-allowed">
        다음
      </button>
    </div>
  </div>
  <script id="surveyScript">
    document.addEventListener('DOMContentLoaded', function () {
      let currentStep = 1;
      const totalSteps = 5;
      let surveyData = {
        people: '',
        budget: 15,
        regions: [],
        style: '',
        pet: false,
        facilities: [],
        mbti: ''
      };
      const progressBar = document.getElementById('progressBar');
      const progressText = document.getElementById('progressText');
      const nextBtn = document.getElementById('nextBtn');
      function updateProgress() {
        const percentage = (currentStep / totalSteps) * 100;
        progressBar.style.width = percentage + '%';
        progressText.textContent = currentStep + '/' + totalSteps;
        for (let i = 1; i <= 5; i++) {
          const dot = document.getElementById('dot' + i);
          if (i <= currentStep) {
            dot.classList.add('bg-primary');
            dot.classList.remove('bg-gray-300');
          } else {
            dot.classList.add('bg-gray-300');
            dot.classList.remove('bg-primary');
          }
        }
      }
      function showStep(stepNumber, direction = 'next') {
        console.log('showStep called with stepNumber:', stepNumber, 'direction:', direction);

        // 현재 활성 스텝 찾기
        let currentActiveStep = null;
        for (let i = 1; i <= totalSteps; i++) {
          const step = document.getElementById('step' + i);
          if (step.classList.contains('step-visible')) {
            currentActiveStep = i;
            break;
          }
        }

        // 새 스텝 요소
        const newStep = document.getElementById('step' + stepNumber);

        if (direction === 'prev') {
          // 이전으로 갈 때: 현재 스텝이 오른쪽으로 사라지고, 새 스텝이 왼쪽에서 나타남

          // 현재 스텝을 오른쪽으로 슬라이드 아웃
          if (currentActiveStep) {
            const currentStep = document.getElementById('step' + currentActiveStep);
            currentStep.classList.remove('step-visible');
            currentStep.classList.add('step-hidden');
          }

          // 새 스텝을 왼쪽에서 슬라이드 인
          newStep.classList.remove('step-hidden');
          newStep.classList.add('step-slide-left');

          // 강제 리플로우
          newStep.offsetHeight;

          // 슬라이드 인
          newStep.classList.remove('step-slide-left');
          newStep.classList.add('step-visible');

        } else {
          // 다음으로 갈 때: 현재 스텝이 왼쪽으로 사라지고, 새 스텝이 오른쪽에서 나타남

          // 현재 스텝을 왼쪽으로 슬라이드 아웃
          if (currentActiveStep) {
            const currentStep = document.getElementById('step' + currentActiveStep);
            currentStep.classList.remove('step-visible');
            currentStep.classList.add('step-slide-left');
          }

          // 새 스텝을 오른쪽에서 슬라이드 인
          newStep.classList.remove('step-hidden');
          newStep.classList.add('step-visible');
        }

        if (stepNumber === totalSteps + 1) {
          console.log('AI 분석 스텝으로 이동');
          document.querySelector('.fixed.bottom-0').style.display = 'none';
          document.getElementById('aiAnalysisStep').classList.remove('step-hidden');
          document.getElementById('aiAnalysisStep').classList.add('step-visible');
          setTimeout(() => {
            document.getElementById('aiAnalysisStep').classList.remove('step-visible');
            document.getElementById('aiAnalysisStep').classList.add('step-hidden');
            document.getElementById('resultStep').classList.remove('step-hidden');
            document.getElementById('resultStep').classList.add('step-visible');
            showResults();
          }, 3000);
        }
      }
      function showResults() {
        document.getElementById('resultStyle').textContent = surveyData.style || '글램핑';
        document.getElementById('resultBudget').textContent = surveyData.budget + '만원';
        document.getElementById('resultPeople').textContent = surveyData.people || '2인';
        document.getElementById('resultRegion').textContent = surveyData.regions[0] || '경기도';
        const facilitiesText = surveyData.facilities.length > 0 ? surveyData.facilities.join(', ') : '없음';
        if (document.getElementById('resultFacilities')) {
          document.getElementById('resultFacilities').textContent = facilitiesText;
        } else {
          const facilitiesDiv = document.createElement('div');
          facilitiesDiv.className = 'bg-white/70 rounded-lg p-2 col-span-2';
          facilitiesDiv.innerHTML = `<span class="text-gray-600">선호시설:</span><span class="font-medium ml-1" id="resultFacilities">${facilitiesText}</span>`;
          document.querySelector('.grid.grid-cols-2.gap-3.text-sm').appendChild(facilitiesDiv);
        }
      }

      document.querySelectorAll('#step1 button[data-value]').forEach(button => {
        button.addEventListener('click', function () {
          document.querySelectorAll('#step1 button[data-value]').forEach(btn => {
            btn.classList.remove('border-primary', 'bg-primary/5');
            btn.querySelector('i:last-child').classList.add('text-transparent');
            btn.querySelector('i:last-child').classList.remove('text-primary');
          });
          this.classList.add('border-primary', 'bg-primary/5');
          this.querySelector('i:last-child').classList.remove('text-transparent');
          this.querySelector('i:last-child').classList.add('text-primary');
          surveyData.people = this.dataset.value;
        });
      });
      const budgetSlider = document.getElementById('budgetSlider');
      const budgetDisplay = document.getElementById('budgetDisplay');
      budgetSlider.addEventListener('input', function () {
        surveyData.budget = parseInt(this.value);
        budgetDisplay.textContent = this.value + '만원';
      });
      document.querySelectorAll('#step2 button[data-budget]').forEach(button => {
        button.addEventListener('click', function () {
          const budget = parseInt(this.dataset.budget);
          budgetSlider.value = budget;
          surveyData.budget = budget;
          budgetDisplay.textContent = budget + '만원';
          document.querySelectorAll('#step2 button[data-budget]').forEach(btn => {
            btn.classList.remove('border-primary', 'bg-primary/5');
          });
          this.classList.add('border-primary', 'bg-primary/5');
        });
      });
      document.querySelectorAll('.region-btn').forEach(button => {
        button.addEventListener('click', function () {
          const region = this.dataset.region;
          if (this.classList.contains('border-primary')) {
            this.classList.remove('border-primary', 'bg-primary/5');
            surveyData.regions = surveyData.regions.filter(r => r !== region);
          } else {
            this.classList.add('border-primary', 'bg-primary/5');
            surveyData.regions.push(region);
          }
        });
      });
      document.querySelectorAll('.style-btn').forEach(button => {
        button.addEventListener('click', function () {
          document.querySelectorAll('.style-btn').forEach(btn => {
            btn.classList.remove('border-primary', 'bg-primary/5');
            btn.querySelector('i:last-child').classList.add('text-transparent');
            btn.querySelector('i:last-child').classList.remove('text-primary');
          });
          this.classList.add('border-primary', 'bg-primary/5');
          this.querySelector('i:last-child').classList.remove('text-transparent');
          this.querySelector('i:last-child').classList.add('text-primary');
          surveyData.style = this.dataset.style;
        });
      });
      function updatePetCheckboxStyle() {
        const petLabel = document.getElementById('petLabel');
        const isChecked = document.getElementById('petCheckbox').checked;
        if (isChecked) {
          petLabel.classList.add('bg-primary/5', 'border-2', 'border-primary', '!rounded-xl');
          petLabel.classList.remove('border-transparent');
        } else {
          petLabel.classList.remove('bg-primary/5', 'border-primary');
          petLabel.classList.add('border-2', 'border-transparent', '!rounded-xl');
        }
      }
      document.getElementById('petCheckbox').addEventListener('change', function () {
        surveyData.pet = this.checked;
        updatePetCheckboxStyle();
      });
      document.addEventListener('DOMContentLoaded', function () {
        updatePetCheckboxStyle();
      });
      document.querySelectorAll('.mbti-btn').forEach(button => {
        button.addEventListener('click', function () {
          document.querySelectorAll('.mbti-btn').forEach(btn => {
            btn.classList.remove('border-primary', 'bg-primary/5');
          });
          this.classList.add('border-primary', 'bg-primary/5');
          surveyData.mbti = this.dataset.mbti;
        });
      });
      document.querySelectorAll('.facility-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', function () {
          const facilityLabel = this.closest('.facility-label');
          if (this.checked) {
            facilityLabel.classList.add('bg-primary/5');
            if (!surveyData.facilities.includes(this.value)) {
              surveyData.facilities.push(this.value);
            }
          } else {
            facilityLabel.classList.remove('bg-primary/5');
            surveyData.facilities = surveyData.facilities.filter(facility => facility !== this.value);
          }
        });
      });
      nextBtn.addEventListener('click', function () {
        console.log('nextBtn clicked, currentStep:', currentStep, 'totalSteps:', totalSteps);

        if (currentStep < totalSteps) {
          currentStep++;
          updateProgress();
          showStep(currentStep);
          if (currentStep === totalSteps) {
            nextBtn.textContent = '추천 받기';
          }
        } else if (currentStep === totalSteps) {
          // 마지막 스텝에서 "추천 받기" 버튼 클릭 시
          console.log('추천 받기 버튼 클릭됨');

          // 현재 활성 스텝을 왼쪽으로 슬라이드 아웃
          const currentActiveStep = document.getElementById('step' + currentStep);
          currentActiveStep.classList.remove('step-visible');
          currentActiveStep.classList.add('step-slide-left');

          // 하단 버튼 숨기기
          document.querySelector('.fixed.bottom-0').style.display = 'none';

          // AI 분석 스텝을 오른쪽에서 슬라이드 인
          const aiStep = document.getElementById('aiAnalysisStep');
          aiStep.classList.remove('step-hidden');
          aiStep.classList.add('step-visible');

          // 3초 후 결과 스텝으로 슬라이드 전환
          setTimeout(() => {
            // AI 분석 스텝을 왼쪽으로 슬라이드 아웃
            aiStep.classList.remove('step-visible');
            aiStep.classList.add('step-slide-left');

            // 결과 스텝을 오른쪽에서 슬라이드 인
            const resultStep = document.getElementById('resultStep');
            resultStep.classList.remove('step-hidden');
            resultStep.classList.add('step-visible');
            showResults();
          }, 3000);
        }
      });
      updateProgress();

      // ── swipe 제어용 변수
      const slider = document.querySelector('main');
      let startX = 0, isDragging = false;
      // 터치 시작
      slider.addEventListener('touchstart', e => {
        // 맵 위에서 터치했거나 이미 맵 드래그 중이면 스와이프 시작 안 함
        if (window.isMapDragging || e.target.closest('#map')) return;
        startX = e.touches[0].clientX;
        isDragging = true;
      }, { passive: false });

      // 마우스 드래그 시작
      slider.addEventListener('mousedown', e => {
        if (window.isMapDragging || e.target.closest('#map')) return;
        startX = e.clientX;
        isDragging = true;
      });

      // swipe 처리 함수
      function handleSwipe(endX) {
        if (!isDragging) return;

        // 지도 드래그 중이면 화면 전환 방지
        if (window.isMapDragging) {
          console.log('지도 드래그 중 - 화면 전환 방지');
          isDragging = false;
          return;
        }

        const dx = endX - startX;
        const threshold = 50;  // 50px 이상 이동 시 인식
        if (dx < -threshold && currentStep <= totalSteps) {
          // ← swipe → 다음
          currentStep++;
          showStep(currentStep);
          updateProgress();
          if (currentStep === totalSteps) nextBtn.textContent = '추천 받기';
        } else if (dx > threshold && currentStep > 1) {
          // → swipe → 이전
          currentStep--;
          showStep(currentStep, 'prev'); // 이전 스텝으로 돌아갈 때는 'prev' 방향 전달
          updateProgress();
          nextBtn.textContent = '다음';
        }
        isDragging = false;
      }

      // 터치/마우스 드래그 끝
      slider.addEventListener('touchend', e => handleSwipe(e.changedTouches[0].clientX));
      slider.addEventListener('mouseup', e => handleSwipe(e.clientX));
      slider.addEventListener('mouseleave', () => { isDragging = false; });

      // goToResultList 함수 정의
      window.goToResultList = function () {
        // 설문 데이터를 쿼리스트링으로 구성
        const queryParams = [];

        // 필수 설문 데이터 추가
        queryParams.push(`people=${encodeURIComponent(surveyData.people || '2인')}`);
        queryParams.push(`style=${encodeURIComponent(surveyData.style || '글램핑')}`);
        queryParams.push(`budget=${encodeURIComponent(surveyData.budget || 15)}`);
        queryParams.push(`regions=${encodeURIComponent(surveyData.regions.join(',') || '경기도')}`);
        queryParams.push(`pet=${encodeURIComponent(surveyData.pet ? 'true' : 'false')}`);
        queryParams.push(`facilities=${encodeURIComponent(surveyData.facilities.join(',') || '')}`);
        queryParams.push(`mbti=${encodeURIComponent(surveyData.mbti || '')}`);

        // 쿼리스트링 생성
        const queryString = queryParams.join('&');

        // recommend_result_list.html로 이동
        window.location.href = `recommend_result_list.html?${queryString}`;
      };

      // 결과 카드 클릭 이벤트 추가
      document.querySelectorAll('.result-card').forEach((card) => {
        card.addEventListener('click', function (e) {
          // 앵커의 기본 동작 방지
          e.preventDefault();

          // data 속성에서 숙소 정보 읽기
          const title = this.dataset.title || '';
          const region = this.dataset.region || '';
          const price = this.dataset.price || '';
          const rating = this.dataset.rating || '';
          const description = this.dataset.description || '';
          const distance = this.dataset.distance || '';
          const facilities = this.dataset.facilities || '';
          const image = this.dataset.image || '';
          const badge = this.dataset.badge || '';

          // 상세보기 페이지로 이동하면서 숙소 정보와 설문 데이터 전달
          const params = new URLSearchParams();

          // 숙소 정보
          params.append('title', title);
          params.append('region', region);
          params.append('price', price);
          params.append('rating', rating);
          params.append('description', description);
          params.append('distance', distance);
          params.append('facilities', facilities);
          params.append('image', image);
          params.append('badge', badge);

          // 설문 데이터도 함께 전달
          params.append('survey_people', surveyData.people || '2인');
          params.append('survey_style', surveyData.style || '글램핑');
          params.append('survey_budget', surveyData.budget || 15);
          params.append('survey_regions', surveyData.regions.join(',') || '경기도');
          params.append('survey_pet', surveyData.pet ? 'true' : 'false');
          params.append('survey_facilities', surveyData.facilities.join(',') || '');
          params.append('survey_mbti', surveyData.mbti || '');

          // shop_detail.html로 이동
          window.location.href = `shop_detail.html?${params.toString()}`;
        });
      });
    });
  </script>
  <script id="kakao-map-handler">
    document.addEventListener('DOMContentLoaded', function () {
      // ★ 전역 플래그 선언 ★
      window.isMapDragging = false;

      function initMap() {
        const defaultLat = 37.5665;
        const defaultLng = 126.9780;
        const container = document.getElementById('map');
        const options = { center: new kakao.maps.LatLng(defaultLat, defaultLng), level: 8 };
        const map = new kakao.maps.Map(container, options);

        // 맵 드래그/줌 이벤트마다 window.isMapDragging 바로 업데이트
        kakao.maps.event.addListener(map, 'dragstart', () => window.isMapDragging = true);
        kakao.maps.event.addListener(map, 'dragend', () => window.isMapDragging = false);
        kakao.maps.event.addListener(map, 'zoom_start', () => window.isMapDragging = true);
        kakao.maps.event.addListener(map, 'zoom_changed', () => window.isMapDragging = false);

        console.log('카카오 지도 초기화 완료');
      }

      if (typeof kakao !== 'undefined' && kakao.maps) {
        initMap();
      } else {
        const check = setInterval(() => {
          if (typeof kakao !== 'undefined' && kakao.maps) {
            clearInterval(check);
            initMap();
          }
        }, 100);
      }
    });
  </script>
</body>

</html>