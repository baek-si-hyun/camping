<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=375px, initial-scale=1.0">
  <title>예약하기</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <script>
    tailwind.config = { theme: { extend: { colors: { primary: '#7C3AED', secondary: '#9F7AEA' }, borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'lg': '16px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' } } } }
  </script>
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .calendar-day {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 50%;
      position: relative;
    }

    .calendar-day.selected {
      background-color: #7C3AED;
      color: white;
    }

    .calendar-day.range {
      background-color: #EDE9FE;
      color: #7C3AED;
      border-radius: 0;
    }

    .calendar-day.range-start {
      background-color: #7C3AED;
      color: white;
      border-top-left-radius: 50%;
      border-bottom-left-radius: 50%;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .calendar-day.range-end {
      background-color: #7C3AED;
      color: white;
      border-top-right-radius: 50%;
      border-bottom-right-radius: 50%;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    .calendar-day.disabled {
      color: #D1D5DB;
      cursor: not-allowed;
    }

    .toast {
      z-index: 9999;
      transition: all 0.3s ease;
    }

    /* 스크롤바 숨김 */
    ::-webkit-scrollbar {
      display: none;
    }

    * {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>

<body class="bg-white min-h-[762px] pb-24">
  <!-- 네비게이션 바 -->
  <nav class="fixed top-0 left-0 right-0 bg-white z-50 shadow-sm">
    <div class="flex items-center px-4 h-16">
      <a href="#" onclick="event.preventDefault(); history.back();" data-readdy="true"
        class="w-10 h-10 flex items-center justify-center cursor-pointer hover:bg-gray-50 rounded-full">
        <i class="ri-arrow-left-s-line text-xl"></i>
      </a>
      <div class="flex-1 flex justify-center">
        <h1 class="text-lg font-medium absolute left-1/2 transform -translate-x-1/2">예약하기</h1>
      </div>
      <div class="w-10 h-10"></div>
    </div>
  </nav>
  <main class="pt-20 px-4">
    <!-- 숙소 정보 요약 -->
    <section class="mb-6">
      <div class="flex gap-4 p-4 bg-gray-50 rounded-xl">
        <img
          src="https://readdy.ai/api/search-image?query=Luxury%20glamping%20tent%20in%20forest%20setting%2C%20cozy%20interior%20with%20comfortable%20bed%2C%20warm%20lighting%2C%20natural%20wood%20elements%2C%20high-quality%20professional%20photography%2C%20no%20people%2C%20serene%20atmosphere&width=100&height=100&seq=101&orientation=squarish"
          class="w-[80px] h-[80px] rounded-md object-cover" alt="숙소 이미지">
        <div>
          <h2 class="font-medium">숲속 글램핑 리조트</h2>
          <div class="flex items-center gap-1 mt-1 text-sm">
            <i class="ri-star-fill text-yellow-400 text-xs"></i>
            <span class="font-medium">4.8</span>
            <span class="text-gray-400">·</span>
            <span class="text-gray-600">리뷰 128개</span>
          </div>
          <div class="flex items-center gap-1 mt-1 text-sm text-gray-600">
            <i class="ri-map-pin-line text-primary text-xs"></i>
            <span>강원도 홍천군 서면</span>
          </div>
        </div>
      </div>
    </section>
    <!-- 날짜 선택 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">날짜 선택</h2>
      <div class="flex justify-between items-center mb-4">
        <div class="flex-1">
          <span class="text-sm text-gray-500">체크인</span>
          <div id="check-in-date" class="font-medium">2025.07.08 (화)</div>
        </div>
        <div class="w-8 h-[2px] bg-gray-200"></div>
        <div class="flex-1">
          <span class="text-sm text-gray-500">체크아웃</span>
          <div id="check-out-date" class="font-medium">2025.07.09 (수)</div>
        </div>
      </div>
      <!-- 캘린더 -->
      <div class="bg-white rounded-xl border border-gray-200 p-4">
        <div class="flex justify-between items-center mb-4">
          <button id="prev-month"
            class="w-8 h-8 flex items-center justify-center cursor-pointer hover:bg-gray-50 rounded-full">
            <i class="ri-arrow-left-s-line"></i>
          </button>
          <h3 id="current-month" class="font-medium">2025년 7월</h3>
          <button id="next-month"
            class="w-8 h-8 flex items-center justify-center cursor-pointer hover:bg-gray-50 rounded-full">
            <i class="ri-arrow-right-s-line"></i>
          </button>
        </div>
        <div class="grid grid-cols-7 gap-1 text-center mb-2">
          <div class="text-sm text-gray-500">일</div>
          <div class="text-sm text-gray-500">월</div>
          <div class="text-sm text-gray-500">화</div>
          <div class="text-sm text-gray-500">수</div>
          <div class="text-sm text-gray-500">목</div>
          <div class="text-sm text-gray-500">금</div>
          <div class="text-sm text-gray-500">토</div>
        </div>
        <div id="calendar-days" class="grid grid-cols-7 gap-1">
          <!-- 캘린더 날짜는 JavaScript로 동적 생성 -->
        </div>
        <div class="flex items-center gap-3 mt-4 text-sm">
          <div class="flex items-center gap-1">
            <div class="w-3 h-3 rounded-full bg-primary"></div>
            <span>선택한 날짜</span>
          </div>
          <div class="flex items-center gap-1">
            <div class="w-3 h-3 rounded-full bg-gray-200"></div>
            <span>예약 불가</span>
          </div>
        </div>
      </div>
      <div class="mt-4 flex justify-between text-sm">
        <div class="text-gray-600">총 <span id="total-nights" class="font-medium">1</span>박</div>
        <div class="text-primary font-medium" id="nightly-price">₩130,000 / 1박</div>
      </div>
    </section>
    <!-- 선택된 객실 정보 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">선택된 객실</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4" id="selected-room-info">
        <div class="flex gap-3">
          <img
            src="https://readdy.ai/api/search-image?query=Luxury%20glamping%20tent%20interior%20with%20queen%20size%20bed%2C%20cozy%20lighting%2C%20wooden%20furniture%2C%20professional%20photography%2C%20no%20people&width=120&height=120&seq=301&orientation=squarish"
            class="w-[80px] h-[80px] rounded-md object-cover" alt="디럭스 글램핑 텐트" id="selected-room-img">
          <div class="flex-1">
            <div class="flex items-center gap-2">
              <h4 class="font-medium" id="selected-room-name">디럭스 글램핑 텐트</h4>
              <span class="px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full">선택됨</span>
            </div>
            <div class="flex flex-wrap gap-x-3 gap-y-1 mt-1 text-sm text-gray-600">
              <span id="selected-room-area">면적: 25㎡</span>
              <span id="selected-room-capacity">기준 2인 / 최대 3인</span>
            </div>
            <div class="flex flex-wrap gap-x-2 gap-y-1 mt-2" id="selected-room-features">
              <span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">퀸 사이즈 침대</span>
              <span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">욕실</span>
            </div>
            <div class="mt-2 text-primary font-medium" id="selected-room-price">₩130,000 / 1박</div>
          </div>
        </div>
        <input type="hidden" name="room-type" id="selected-room-type" value="deluxe">
      </div>
    </section>
    <!-- 인원 선택 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">인원 선택</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4 space-y-4">
        <div class="flex justify-between items-center">
          <div>
            <h4 class="font-medium">성인</h4>
            <p class="text-sm text-gray-500">만 13세 이상</p>
          </div>
          <div class="flex items-center gap-3">
            <button
              class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full cursor-pointer decrease-btn"
              data-target="adult-count">
              <i class="ri-subtract-line"></i>
            </button>
            <span id="adult-count" class="w-6 text-center">2</span>
            <button
              class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full cursor-pointer increase-btn"
              data-target="adult-count">
              <i class="ri-add-line"></i>
            </button>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <div>
            <h4 class="font-medium">아동</h4>
            <p class="text-sm text-gray-500">만 12세 이하</p>
          </div>
          <div class="flex items-center gap-3">
            <button
              class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full cursor-pointer decrease-btn"
              data-target="child-count">
              <i class="ri-subtract-line"></i>
            </button>
            <span id="child-count" class="w-6 text-center">0</span>
            <button
              class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full cursor-pointer increase-btn"
              data-target="child-count">
              <i class="ri-add-line"></i>
            </button>
          </div>
        </div>
      </div>
    </section>
    <!-- 추가 옵션 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">추가 옵션</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4 space-y-4">
        <div class="flex justify-between items-center">
          <div>
            <h4 class="font-medium">바베큐 세트</h4>
            <p class="text-sm text-gray-500">숯, 그릴, 집게, 장갑 포함</p>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-sm font-medium">₩30,000</span>
            <button type="button" id="bbq-toggle"
              class="relative w-[52px] h-8 bg-gray-200 rounded-full transition-colors duration-200" data-option="bbq"
              data-price="30000">
              <div
                class="absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform duration-200 ease-in-out shadow-md">
              </div>
            </button>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <div>
            <h4 class="font-medium">조식 패키지</h4>
            <p class="text-sm text-gray-500">1인당 가격</p>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-sm font-medium">₩15,000</span>
            <button type="button" id="breakfast-toggle"
              class="relative w-[52px] h-8 bg-gray-200 rounded-full transition-colors duration-200"
              data-option="breakfast" data-price="15000">
              <div
                class="absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform duration-200 ease-in-out shadow-md">
              </div>
            </button>
          </div>
        </div>
        <div class="flex justify-between items-center">
          <div>
            <h4 class="font-medium">와인 패키지</h4>
            <p class="text-sm text-gray-500">레드 와인 1병, 치즈 플레이트</p>
          </div>
          <div class="flex items-center gap-3">
            <span class="text-sm font-medium">₩45,000</span>
            <button type="button" id="wine-toggle"
              class="relative w-[52px] h-8 bg-gray-200 rounded-full transition-colors duration-200" data-option="wine"
              data-price="45000">
              <div
                class="absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform duration-200 ease-in-out shadow-md">
              </div>
            </button>
          </div>
        </div>
      </div>
    </section>
    <!-- 예약자 정보 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">예약자 정보</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4 space-y-4">
        <div>
          <label for="guest-name" class="block text-sm font-medium mb-1">이름 <span class="text-red-500">*</span></label>
          <input type="text" id="guest-name"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
            placeholder="실명을 입력해주세요">
        </div>
        <div>
          <label for="guest-phone" class="block text-sm font-medium mb-1">연락처 <span
              class="text-red-500">*</span></label>
          <input type="tel" id="guest-phone"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
            placeholder="010-0000-0000">
        </div>
        <div>
          <label for="guest-email" class="block text-sm font-medium mb-1">이메일 <span
              class="text-red-500">*</span></label>
          <input type="email" id="guest-email"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
            placeholder="example@email.com">
        </div>
        <div>
          <label for="guest-request" class="block text-sm font-medium mb-1">요청사항</label>
          <textarea id="guest-request"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary h-24 resize-none"
            placeholder="요청사항이 있으시면 입력해주세요"></textarea>
        </div>
      </div>
    </section>
    <!-- 결제 정보 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">결제 정보</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4 space-y-4">
        <div>
          <h4 class="font-medium mb-3">결제 수단 선택</h4>
          <div class="grid grid-cols-3 gap-2">
            <label
              class="payment-method flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg cursor-pointer"
              onclick="showCardIssuers()">
              <input type="radio" name="payment-method" value="card" class="sr-only" checked>
              <i class="ri-bank-card-line text-2xl mb-1"></i>
              <span class="text-sm">신용카드</span>
            </label>
            <div id="cardIssuersModal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden">
              <div class="bg-white rounded-xl w-[320px] max-h-[80vh] overflow-y-auto">
                <div class="p-4 border-b border-gray-200">
                  <div class="flex items-center justify-between">
                    <h3 class="text-lg font-medium">카드사 선택</h3>
                    <button onclick="closeCardIssuers()"
                      class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100">
                      <i class="ri-close-line text-xl"></i>
                    </button>
                  </div>
                </div>
                <div class="p-4 space-y-2">
                  <button onclick="selectCardIssuer('samsung')"
                    class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                    <i class="ri-samsung-line text-2xl text-blue-500"></i>
                    <div class="flex-1 text-left">
                      <p class="font-medium">삼성카드</p>
                      <p class="text-sm text-gray-500">삼성카드 앱카드로 결제</p>
                    </div>
                    <i class="ri-arrow-right-s-line text-xl text-gray-400"></i>
                  </button>
                  <button onclick="selectCardIssuer('shinhan')"
                    class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                    <i class="ri-bank-line text-2xl text-blue-600"></i>
                    <div class="flex-1 text-left">
                      <p class="font-medium">신한카드</p>
                      <p class="text-sm text-gray-500">신한 앱카드로 결제</p>
                    </div>
                    <i class="ri-arrow-right-s-line text-xl text-gray-400"></i>
                  </button>
                  <button onclick="selectCardIssuer('kb')"
                    class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                    <i class="ri-bank-line text-2xl text-yellow-500"></i>
                    <div class="flex-1 text-left">
                      <p class="font-medium">국민카드</p>
                      <p class="text-sm text-gray-500">국민 앱카드로 결제</p>
                    </div>
                    <i class="ri-arrow-right-s-line text-xl text-gray-400"></i>
                  </button>
                  <button onclick="selectCardIssuer('hyundai')"
                    class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                    <i class="ri-bank-line text-2xl text-red-500"></i>
                    <div class="flex-1 text-left">
                      <p class="font-medium">현대카드</p>
                      <p class="text-sm text-gray-500">현대카드 앱으로 결제</p>
                    </div>
                    <i class="ri-arrow-right-s-line text-xl text-gray-400"></i>
                  </button>
                  <button onclick="selectCardIssuer('lotte')"
                    class="w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                    <i class="ri-bank-line text-2xl text-red-600"></i>
                    <div class="flex-1 text-left">
                      <p class="font-medium">롯데카드</p>
                      <p class="text-sm text-gray-500">롯데카드 앱으로 결제</p>
                    </div>
                    <i class="ri-arrow-right-s-line text-xl text-gray-400"></i>
                  </button>
                </div>
              </div>
            </div>
            <label
              class="payment-method flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="payment-method" value="transfer" class="sr-only">
              <i class="ri-bank-line text-2xl mb-1"></i>
              <span class="text-sm">계좌이체</span>
            </label>
            <label
              class="payment-method flex flex-col items-center justify-center p-3 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="payment-method" value="easy" class="sr-only">
              <i class="ri-smartphone-line text-2xl mb-1"></i>
              <span class="text-sm">간편결제</span>
            </label>
          </div>
        </div>
        <div id="card-payment-form">
          <div class="mb-3">
            <label for="card-number" class="block text-sm font-medium mb-1">카드번호 <span
                class="text-red-500">*</span></label>
            <input type="text" id="card-number"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
              placeholder="0000-0000-0000-0000">
          </div>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label for="card-expiry" class="block text-sm font-medium mb-1">유효기간 <span
                  class="text-red-500">*</span></label>
              <input type="text" id="card-expiry"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
                placeholder="MM/YY">
            </div>
            <div>
              <label for="card-cvc" class="block text-sm font-medium mb-1">CVC <span
                  class="text-red-500">*</span></label>
              <input type="text" id="card-cvc"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
                placeholder="000">
            </div>
          </div>
        </div>
        <div id="transfer-payment-form" class="hidden">
          <div class="p-4 bg-gray-50 rounded-lg">
            <h5 class="font-medium mb-2">입금 계좌 정보</h5>
            <p class="text-sm mb-1">은행명: 신한은행</p>
            <p class="text-sm mb-1">계좌번호: 110-123-456789</p>
            <p class="text-sm mb-1">예금주: (주)숲속글램핑</p>
            <p class="text-sm text-red-500 mt-2">* 예약 확정을 위해 24시간 이내 입금이 필요합니다.</p>
          </div>
        </div>
        <div id="easy-payment-form" class="hidden">
          <div class="grid grid-cols-4 gap-2">
            <label
              class="easy-payment flex flex-col items-center justify-center p-2 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="easy-payment-type" value="kakao" class="sr-only" checked>
              <i class="ri-kakao-talk-fill text-2xl mb-1 text-yellow-400"></i>
              <span class="text-xs">카카오페이</span>
            </label>
            <label
              class="easy-payment flex flex-col items-center justify-center p-2 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="easy-payment-type" value="naver" class="sr-only">
              <i class="ri-naver-fill text-2xl mb-1 text-green-500"></i>
              <span class="text-xs">네이버페이</span>
            </label>
            <label
              class="easy-payment flex flex-col items-center justify-center p-2 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="easy-payment-type" value="payco" class="sr-only">
              <i class="ri-wallet-3-fill text-2xl mb-1 text-red-500"></i>
              <span class="text-xs">페이코</span>
            </label>
            <label
              class="easy-payment flex flex-col items-center justify-center p-2 border border-gray-200 rounded-lg cursor-pointer">
              <input type="radio" name="easy-payment-type" value="toss" class="sr-only">
              <i class="ri-secure-payment-fill text-2xl mb-1 text-blue-500"></i>
              <span class="text-xs">토스</span>
            </label>
          </div>
        </div>
        <div class="mt-4 pt-4 border-t border-gray-100">
          <h4 class="font-medium mb-3">결제 금액</h4>
          <div class="space-y-2">
            <div class="flex justify-between text-sm">
              <span>객실 요금 (1박)</span>
              <span id="room-price">₩130,000</span>
            </div>
            <div class="flex justify-between text-sm">
              <span>추가 옵션</span>
              <span id="options-price">₩0</span>
            </div>
            <div class="flex justify-between font-medium pt-2 border-t border-gray-100 mt-2">
              <span>총 결제 금액</span>
              <span id="total-price" class="text-primary">₩130,000</span>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- 이용 약관 동의 섹션 -->
    <section class="mb-8">
      <h2 class="text-lg font-medium mb-4">이용 약관 동의</h2>
      <div class="bg-white border border-gray-200 rounded-xl p-4 space-y-4">
        <label class="flex items-start gap-2 cursor-pointer">
          <div class="relative flex items-center justify-center mt-0.5">
            <input type="checkbox" id="agree-all" class="sr-only">
            <div class="w-5 h-5 border-2 border-gray-300 rounded"></div>
            <i class="ri-check-line text-white absolute text-sm hidden"></i>
          </div>
          <span class="font-medium">전체 동의</span>
        </label>
        <div class="w-full h-px bg-gray-200 my-2"></div>
        <label class="flex items-start gap-2 cursor-pointer">
          <div class="relative flex items-center justify-center mt-0.5">
            <input type="checkbox" id="agree-terms" class="sr-only agree-checkbox">
            <div class="w-5 h-5 border-2 border-gray-300 rounded"></div>
            <i class="ri-check-line text-white absolute text-sm hidden"></i>
          </div>
          <div>
            <span class="text-sm">[필수] 숙소 이용 규칙 및 취소/환불 규정 동의</span>
            <button class="text-xs text-primary ml-1">보기</button>
          </div>
        </label>
        <label class="flex items-start gap-2 cursor-pointer">
          <div class="relative flex items-center justify-center mt-0.5">
            <input type="checkbox" id="agree-privacy" class="sr-only agree-checkbox">
            <div class="w-5 h-5 border-2 border-gray-300 rounded"></div>
            <i class="ri-check-line text-white absolute text-sm hidden"></i>
          </div>
          <div>
            <span class="text-sm">[필수] 개인정보 수집 및 이용 동의</span>
            <button class="text-xs text-primary ml-1">보기</button>
          </div>
        </label>
        <label class="flex items-start gap-2 cursor-pointer">
          <div class="relative flex items-center justify-center mt-0.5">
            <input type="checkbox" id="agree-marketing" class="sr-only agree-checkbox">
            <div class="w-5 h-5 border-2 border-gray-300 rounded"></div>
            <i class="ri-check-line text-white absolute text-sm hidden"></i>
          </div>
          <div>
            <span class="text-sm">[선택] 마케팅 정보 수신 동의</span>
            <button class="text-xs text-primary ml-1">보기</button>
          </div>
        </label>
      </div>
    </section>
  </main>
  <!-- 하단 고정 예약 버튼 -->
  <div class="fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-gray-100 shadow-lg">
    <div class="flex items-center justify-between mb-3">
      <span class="font-medium">총 결제 금액</span>
      <span id="bottom-total-price" class="text-xl font-bold text-primary">₩130,000</span>
    </div>
    <button id="reservation-button"
      class="w-full h-12 bg-primary text-white font-medium rounded-xl !rounded-button shadow-lg shadow-primary/25 hover:shadow-primary/40 transition-all duration-300 cursor-pointer">
      예약하기
    </button>
  </div>
  <!-- 모달 -->
  <div id="reservation-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl w-[320px] p-6 animate-scaleIn">
      <div class="flex justify-center mb-4">
        <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="ri-check-line text-3xl text-primary"></i>
        </div>
      </div>
      <h3 class="text-xl font-medium text-center mb-2">예약이 완료되었습니다</h3>
      <p class="text-gray-600 text-center mb-6">예약 확인 메일이 발송되었습니다.</p>
      <div class="space-y-3">
        <a href="index.html"
          class="block w-full py-3 bg-primary text-white text-center font-medium rounded-lg !rounded-button">
          확인
        </a>
      </div>
    </div>
  </div>
  <script id="calendarScript">
    document.addEventListener('DOMContentLoaded', function () {
      const params = new URLSearchParams(window.location.search);
      const inParam = params.get('checkIn');    // ex: "2025.07.25"
      const outParam = params.get('checkOut');   // ex: "2025.07.26"

      function parseYmd(s) {
        if (!s) return null;
        const [y, m, d] = s.split('.');
        return new Date(+y, +m - 1, +d);
      }

      let selectedStartDate = parseYmd(inParam) || new Date(2025, 6, 8);
      let selectedEndDate = parseYmd(outParam) || new Date(2025, 6, 9);

      // DOM 요소
      const calendarDays = document.getElementById('calendar-days');
      const currentMonthEl = document.getElementById('current-month');
      const prevMonthBtn = document.getElementById('prev-month');
      const nextMonthBtn = document.getElementById('next-month');
      const checkInDateEl = document.getElementById('check-in-date');
      const checkOutDateEl = document.getElementById('check-out-date');
      const totalNightsEl = document.getElementById('total-nights');

      function formatDate(date) {
        const days = ['일', '월', '화', '수', '목', '금', '토'];
        const y = date.getFullYear();
        const m = String(date.getMonth() + 1).padStart(2, '0');
        const d = String(date.getDate()).padStart(2, '0');
        return `${y}.${m}.${d} (${days[date.getDay()]})`;
      }

      // 초기 화면 반영
      checkInDateEl.textContent = formatDate(selectedStartDate);
      checkOutDateEl.textContent = formatDate(selectedEndDate);
      const initNights = Math.round((selectedEndDate - selectedStartDate) / (1000 * 60 * 60 * 24));
      totalNightsEl.textContent = initNights;

      // 초기 박 수 표시 업데이트
      updateNightsDisplay(initNights);

      // 달력 렌더링 함수
      function renderCalendar() {
        calendarDays.innerHTML = '';
        const year = selectedStartDate.getFullYear(); // 현재 보고 있는 달
        const month = selectedStartDate.getMonth();
        currentMonthEl.textContent = `${year}년 ${month + 1}월`;

        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const startIdx = firstDay.getDay();

        // 이전 달 남은 칸
        for (let i = 0; i < startIdx; i++) {
          const el = document.createElement('div');
          el.className = 'calendar-day disabled';
          el.textContent = new Date(year, month, 1 - startIdx + i).getDate();
          calendarDays.appendChild(el);
        }
        // 이번 달 날짜
        const today = new Date(); today.setHours(0, 0, 0, 0);
        for (let i = 1; i <= lastDay.getDate(); i++) {
          const date = new Date(year, month, i);
          const el = document.createElement('div');
          el.className = 'calendar-day';
          el.textContent = i;
          if (date < today) {
            el.classList.add('disabled');
          } else {
            // 범위 스타일
            if (date.getTime() === selectedStartDate.getTime()) {
              el.classList.add('selected');
            }
            if (selectedEndDate && date.getTime() === selectedEndDate.getTime()) {
              el.classList.add('selected');
            }
            if (selectedEndDate && date > selectedStartDate && date < selectedEndDate) {
              el.classList.add('in-range');
            }
            // 클릭 이벤트
            el.addEventListener('click', () => {
              if (date < today) return;
              if (!selectedStartDate || (selectedStartDate && selectedEndDate)) {
                selectedStartDate = date;
                selectedEndDate = null;
                checkInDateEl.textContent = formatDate(selectedStartDate);
                checkOutDateEl.textContent = '선택해주세요';
                totalNightsEl.textContent = '0';
                updateNightsDisplay(0);
              } else {
                if (date < selectedStartDate) {
                  selectedEndDate = selectedStartDate;
                  selectedStartDate = date;
                } else {
                  selectedEndDate = date;
                }
                checkInDateEl.textContent = formatDate(selectedStartDate);
                checkOutDateEl.textContent = formatDate(selectedEndDate);
                const nights = Math.round((selectedEndDate - selectedStartDate) / (1000 * 60 * 60 * 24));
                totalNightsEl.textContent = nights;

                // 박 수 관련 UI 업데이트
                updateNightsDisplay(nights);

                // 날짜 변경 시 가격 계산 업데이트
                if (window.updateTotalPrice) {
                  window.updateTotalPrice();
                  console.log('날짜 변경으로 인한 가격 업데이트 - 숙박일수:', nights);
                }
              }
              renderCalendar();
            });
          }
          calendarDays.appendChild(el);
        }
        // 다음 달 빈 칸
        const endIdx = lastDay.getDay();
        for (let i = 1; i < 7 - endIdx; i++) {
          const el = document.createElement('div');
          el.className = 'calendar-day disabled';
          el.textContent = i;
          calendarDays.appendChild(el);
        }
      }

      // 박 수 표시 업데이트 함수
      function updateNightsDisplay(nights) {
        // 결제 정보 섹션의 "객실 요금 (1박)" 텍스트 업데이트
        const roomPriceLabel = document.querySelector('#room-price').previousElementSibling;
        if (roomPriceLabel && roomPriceLabel.textContent.includes('객실 요금')) {
          roomPriceLabel.textContent = `객실 요금 (${nights}박)`;
        }

        console.log('박 수 표시 업데이트:', nights + '박');
      }

      prevMonthBtn.addEventListener('click', () => { selectedStartDate.setMonth(selectedStartDate.getMonth() - 1); renderCalendar(); });
      nextMonthBtn.addEventListener('click', () => { selectedStartDate.setMonth(selectedStartDate.getMonth() + 1); renderCalendar(); });

      renderCalendar();
    });
  </script>
  <script id="roomTypeSelector">
    document.addEventListener('DOMContentLoaded', function () {
      const roomTypeRadios = document.querySelectorAll('input[name="room-type"]');
      const roomRadioIndicators = document.querySelectorAll('.room-radio');
      roomTypeRadios.forEach((radio, index) => {
        radio.addEventListener('change', function () {
          // 모든 라디오 버튼 표시 초기화
          roomRadioIndicators.forEach(indicator => {
            indicator.classList.remove('border-primary');
            indicator.classList.add('border-gray-300');
            indicator.querySelector('div').classList.add('hidden');
          });
          // 선택된 라디오 버튼 표시
          if (this.checked) {
            roomRadioIndicators[index].classList.remove('border-gray-300');
            roomRadioIndicators[index].classList.add('border-primary');
            roomRadioIndicators[index].querySelector('div').classList.remove('hidden');
            // 가격 업데이트 - URL 파라미터 우선 사용
            const params = new URLSearchParams(window.location.search);
            const urlRoomPrice = params.get('roomPrice');

            if (urlRoomPrice) {
              // URL 파라미터가 있으면 그 가격 사용 (객실 타입 변경 시에도 유지)
              const roomPrice = Number(urlRoomPrice);
              document.getElementById('room-price').textContent = `₩${roomPrice.toLocaleString()}`;
              console.log('URL 파라미터 가격 사용:', roomPrice);
            } else {
              // 없으면 기본 가격 사용
              let roomPrice = 130000; // 기본 가격 (디럭스)
              if (this.value === 'premium') {
                roomPrice = 180000;
              } else if (this.value === 'family') {
                roomPrice = 220000;
              }
              document.getElementById('room-price').textContent = `₩${roomPrice.toLocaleString()}`;
              console.log('기본 가격 사용:', roomPrice);
            }
            updateTotalPrice();
          }
        });
      });
    });
  </script>
  <script id="guestCountManager">
    document.addEventListener('DOMContentLoaded', function () {
      const decreaseButtons = document.querySelectorAll('.decrease-btn');
      const increaseButtons = document.querySelectorAll('.increase-btn');
      decreaseButtons.forEach(button => {
        button.addEventListener('click', function () {
          const targetId = this.dataset.target;
          const countElement = document.getElementById(targetId);
          let count = parseInt(countElement.textContent);
          // 최소값 설정
          const minValue = targetId === 'adult-count' ? 1 : 0;
          if (count > minValue) {
            count--;
            countElement.textContent = count;
            updateBreakfastPrice();
          }
        });
      });
      increaseButtons.forEach(button => {
        button.addEventListener('click', function () {
          const targetId = this.dataset.target;
          const countElement = document.getElementById(targetId);
          let count = parseInt(countElement.textContent);
          // 최대값 설정 (객실 타입에 따라 다름)
          let maxValue = 6;

          // URL 파라미터에서 객실 ID 가져오기
          const params = new URLSearchParams(window.location.search);
          const roomId = params.get('roomId');

          // 객실 타입별 최대 인원 설정
          const maxCapacityMap = {
            'premium': 4,
            'standard': 3,
            'family': 6,
            'dome': 2,
            'treehouse': 3,
            'deluxe': 3
          };

          maxValue = maxCapacityMap[roomId] || 6;
          console.log('객실 타입:', roomId, '최대 인원:', maxValue);
          const adultCount = parseInt(document.getElementById('adult-count').textContent);
          const childCount = parseInt(document.getElementById('child-count').textContent);
          const totalCount = adultCount + childCount;
          if (totalCount < maxValue) {
            count++;
            countElement.textContent = count;
            updateBreakfastPrice();
          } else {
            showToast(`최대 ${maxValue}명까지 가능합니다`);
          }
        });
      });
      function updateBreakfastPrice() {
        // 인원 수 변경 시 가격 업데이트 제거 (인원수는 가격에 영향을 미치지 않음)
        console.log('인원 수 변경됨 (가격에 영향 없음)');
      }
      function showToast(message) {
        // 기존 토스트 제거
        const existingToast = document.querySelector('.toast');
        if (existingToast) {
          existingToast.remove();
        }
        // 새 토스트 생성
        const toast = document.createElement('div');
        toast.className = 'toast fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm';
        toast.textContent = message;
        document.body.appendChild(toast);
        // 3초 후 제거
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translate(-50%, 20px)';
          toast.style.transition = 'opacity 0.3s, transform 0.3s';
          setTimeout(() => {
            toast.remove();
          }, 300);
        }, 2000);
      }
    });
  </script>
  <script id="additionalOptionsManager">
    document.addEventListener('DOMContentLoaded', function () {
      const optionToggles = document.querySelectorAll('#bbq-toggle, #breakfast-toggle, #wine-toggle');

      optionToggles.forEach(toggle => {
        toggle.addEventListener('click', function () {
          const isActive = this.classList.contains('bg-primary');
          const dot = this.querySelector('div');

          if (isActive) {
            // 비활성화
            this.classList.remove('bg-primary');
            this.classList.add('bg-gray-200');
            dot.classList.remove('translate-x-5');
            this.setAttribute('data-active', 'false');
          } else {
            // 활성화
            this.classList.remove('bg-gray-200');
            this.classList.add('bg-primary');
            dot.classList.add('translate-x-5');
            this.setAttribute('data-active', 'true');
          }

          updateTotalPrice();
          console.log('추가 옵션 토글:', this.getAttribute('data-option'), isActive ? '비활성화' : '활성화');
        });
      });
    });
  </script>
  <script id="paymentMethodManager">
    document.addEventListener('DOMContentLoaded', function () {
      const paymentMethodRadios = document.querySelectorAll('input[name="payment-method"]');
      const cardPaymentForm = document.getElementById('card-payment-form');
      const transferPaymentForm = document.getElementById('transfer-payment-form');
      const easyPaymentForm = document.getElementById('easy-payment-form');
      const paymentMethodLabels = document.querySelectorAll('.payment-method');
      const cardIssuersModal = document.getElementById('cardIssuersModal');
      window.showCardIssuers = function () {
        cardIssuersModal.classList.remove('hidden');
      };
      window.closeCardIssuers = function () {
        cardIssuersModal.classList.add('hidden');
      };
      window.selectCardIssuer = function (issuer) {
        let appScheme;
        switch (issuer) {
          case 'samsung':
            appScheme = 'samsungcard://';
            break;
          case 'shinhan':
            appScheme = 'shinhancard://';
            break;
          case 'kb':
            appScheme = 'kb-acp://';
            break;
          case 'hyundai':
            appScheme = 'hyundaicard://';
            break;
          case 'lotte':
            appScheme = 'lottecard://';
            break;
          default:
            appScheme = '';
        }
        if (appScheme) {
          window.location.href = appScheme;
          setTimeout(() => {
            if (document.hidden) return;
            showToast('해당 카드사 앱이 설치되어 있지 않습니다.');
          }, 500);
        }
        cardIssuersModal.classList.add('hidden');
      };
      function showToast(message) {
        const toast = document.createElement('div');
        toast.className = 'toast fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm';
        toast.textContent = message;
        document.body.appendChild(toast);
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translate(-50%, 20px)';
          toast.style.transition = 'opacity 0.3s, transform 0.3s';
          setTimeout(() => toast.remove(), 300);
        }, 2000);
      }
      paymentMethodRadios.forEach((radio, index) => {
        radio.addEventListener('change', function () {
          // 모든 결제 방법 폼 숨기기
          cardPaymentForm.classList.add('hidden');
          transferPaymentForm.classList.add('hidden');
          easyPaymentForm.classList.add('hidden');
          // 모든 라벨 스타일 초기화
          paymentMethodLabels.forEach(label => {
            label.classList.remove('border-primary', 'bg-primary/5');
          });
          // 선택된 결제 방법 폼 표시 및 라벨 스타일 변경
          if (this.value === 'card') {
            cardPaymentForm.classList.remove('hidden');
          } else if (this.value === 'transfer') {
            transferPaymentForm.classList.remove('hidden');
          } else if (this.value === 'easy') {
            easyPaymentForm.classList.remove('hidden');
          }
          paymentMethodLabels[index].classList.add('border-primary', 'bg-primary/5');
        });
      });
      // 간편결제 방법 선택
      const easyPaymentRadios = document.querySelectorAll('input[name="easy-payment-type"]');
      const easyPaymentLabels = document.querySelectorAll('.easy-payment');
      easyPaymentRadios.forEach((radio, index) => {
        radio.addEventListener('change', function () {
          // 모든 라벨 스타일 초기화
          easyPaymentLabels.forEach(label => {
            label.classList.remove('border-primary', 'bg-primary/5');
          });
          // 선택된 라벨 스타일 변경
          easyPaymentLabels[index].classList.add('border-primary', 'bg-primary/5');
        });
      });
    });
  </script>
  <script id="agreementManager">
    document.addEventListener('DOMContentLoaded', function () {
      const agreeAllCheckbox = document.getElementById('agree-all');
      const agreeCheckboxes = document.querySelectorAll('.agree-checkbox');
      const checkboxContainers = document.querySelectorAll('input[type="checkbox"]');
      // 체크박스 스타일 업데이트 함수
      function updateCheckboxStyle(checkbox) {
        const container = checkbox.parentElement;
        const checkIcon = container.querySelector('i');
        const boxElement = container.querySelector('div');
        if (checkbox.checked) {
          boxElement.classList.remove('border-gray-300');
          boxElement.classList.add('bg-primary', 'border-primary');
          checkIcon.classList.remove('hidden');
        } else {
          boxElement.classList.remove('bg-primary', 'border-primary');
          boxElement.classList.add('border-gray-300');
          checkIcon.classList.add('hidden');
        }
      }
      // 모든 체크박스에 이벤트 리스너 추가
      checkboxContainers.forEach(checkbox => {
        checkbox.addEventListener('change', function () {
          updateCheckboxStyle(this);
          // 전체 동의 체크박스 처리
          if (this.id === 'agree-all') {
            agreeCheckboxes.forEach(cb => {
              cb.checked = this.checked;
              updateCheckboxStyle(cb);
            });
          } else if (this.classList.contains('agree-checkbox')) {
            // 개별 체크박스가 모두 선택되었는지 확인
            const allChecked = Array.from(agreeCheckboxes).every(cb => cb.checked);
            agreeAllCheckbox.checked = allChecked;
            updateCheckboxStyle(agreeAllCheckbox);
          }
        });
      });
    });
  </script>
  <script id="formValidation">
    document.addEventListener('DOMContentLoaded', function () {
      const reservationButton = document.getElementById('reservation-button');
      const reservationModal = document.getElementById('reservation-modal');
      const guestNameInput = document.getElementById('guest-name');
      const guestPhoneInput = document.getElementById('guest-phone');
      const guestEmailInput = document.getElementById('guest-email');
      const agreeTermsCheckbox = document.getElementById('agree-terms');
      const agreePrivacyCheckbox = document.getElementById('agree-privacy');
      // 이름 한글/영어만 입력 가능
      guestNameInput.addEventListener('input', function (e) {
        const input = e.target;
        // 한글, 영어, 공백만 허용하는 정규식
        input.value = input.value.replace(/[^가-힣a-zA-Z\s]/g, '');
      });

      // 전화번호 자동 하이픈 포맷팅
      guestPhoneInput.addEventListener('input', function (e) {
        const input = e.target;
        let value = input.value.replace(/[^0-9]/g, '');
        if (value.length > 3 && value.length <= 7) {
          value = value.slice(0, 3) + '-' + value.slice(3);
        } else if (value.length > 7) {
          value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11);
        }
        input.value = value;
      });

      // 카드번호 자동 하이픈 포맷팅
      const cardNumberInput = document.getElementById('card-number');
      cardNumberInput.addEventListener('input', function (e) {
        const input = e.target;
        let value = input.value.replace(/[^0-9]/g, '');
        if (value.length > 4) {
          value = value.slice(0, 4) + '-' + value.slice(4);
        }
        if (value.length > 9) {
          value = value.slice(0, 9) + '-' + value.slice(9);
        }
        if (value.length > 14) {
          value = value.slice(0, 14) + '-' + value.slice(14);
        }
        input.value = value.slice(0, 19); // 최대 16자리 + 하이픈 3개
      });

      // 카드 유효기간 자동 슬래시 포맷팅
      const cardExpiryInput = document.getElementById('card-expiry');
      cardExpiryInput.addEventListener('input', function (e) {
        const input = e.target;
        let value = input.value.replace(/[^0-9]/g, '');
        if (value.length > 2) {
          value = value.slice(0, 2) + '/' + value.slice(2);
        }
        input.value = value.slice(0, 5); // MM/YY 형식
      });

      // CVC 숫자만 입력 가능
      const cardCvcInput = document.getElementById('card-cvc');
      cardCvcInput.addEventListener('input', function (e) {
        const input = e.target;
        input.value = input.value.replace(/[^0-9]/g, '').slice(0, 3);
      });
      // 이메일 유효성 검사
      function isValidEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }
      // 폼 유효성 검사
      function validateForm() {
        let isValid = true;
        let errorMessage = '';
        let focusElement = null;

        // 이름 검사
        if (!guestNameInput.value.trim()) {
          isValid = false;
          errorMessage = '예약자 이름을 입력해주세요';
          focusElement = guestNameInput;
        }
        // 전화번호 검사
        else if (!guestPhoneInput.value.trim() || guestPhoneInput.value.replace(/[^0-9]/g, '').length < 10) {
          isValid = false;
          errorMessage = '올바른 연락처를 입력해주세요';
          focusElement = guestPhoneInput;
        }
        // 이메일 검사
        else if (!guestEmailInput.value.trim() || !isValidEmail(guestEmailInput.value)) {
          isValid = false;
          errorMessage = '올바른 이메일을 입력해주세요';
          focusElement = guestEmailInput;
        }
        // 필수 약관 동의 검사
        else if (!agreeTermsCheckbox.checked || !agreePrivacyCheckbox.checked) {
          isValid = false;
          errorMessage = '필수 약관에 동의해주세요';
        }
        // 결제 정보 검사
        else {
          const selectedPaymentMethod = document.querySelector('input[name="payment-method"]:checked');
          if (!selectedPaymentMethod) {
            isValid = false;
            errorMessage = '결제 수단을 선택해주세요';
          } else {
            // 신용카드 선택 시 카드 정보 검사
            if (selectedPaymentMethod.value === 'card') {
              const cardNumber = document.getElementById('card-number').value.trim();
              const cardExpiry = document.getElementById('card-expiry').value.trim();
              const cardCvc = document.getElementById('card-cvc').value.trim();

              if (!cardNumber || cardNumber.replace(/[^0-9]/g, '').length < 16) {
                isValid = false;
                errorMessage = '올바른 카드번호를 입력해주세요';
                focusElement = document.getElementById('card-number');
              } else if (!cardExpiry || !/^\d{2}\/\d{2}$/.test(cardExpiry)) {
                isValid = false;
                errorMessage = '올바른 유효기간을 입력해주세요 (MM/YY)';
                focusElement = document.getElementById('card-expiry');
              } else if (!cardCvc || cardCvc.length < 3) {
                isValid = false;
                errorMessage = '올바른 CVC를 입력해주세요';
                focusElement = document.getElementById('card-cvc');
              }
            }
            // 계좌이체 선택 시 추가 검증 없음 (입금 안내만 표시)
            // 간편결제 선택 시 추가 검증 없음 (앱 연동)
          }
        }

        if (!isValid && errorMessage) {
          showToast(errorMessage);
          if (focusElement) {
            focusElement.focus();
          }
        }
        return isValid;
      }
      // 예약 버튼 클릭 이벤트
      reservationButton.addEventListener('click', function () {
        if (validateForm()) {
          reservationModal.classList.remove('hidden');
        }
      });
      function showToast(message) {
        // 기존 토스트 제거
        const existingToast = document.querySelector('.toast');
        if (existingToast) {
          existingToast.remove();
        }
        // 새 토스트 생성
        const toast = document.createElement('div');
        toast.className = 'toast fixed bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm';
        toast.textContent = message;
        document.body.appendChild(toast);
        // 3초 후 제거
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.style.transform = 'translate(-50%, 20px)';
          toast.style.transition = 'opacity 0.3s, transform 0.3s';
          setTimeout(() => {
            toast.remove();
          }, 300);
        }, 2000);
      }
    });
  </script>
  <script id="priceCalculator">
    document.addEventListener('DOMContentLoaded', function () {
      // URL 파라미터에서 객실 가격 가져오기
      const params = new URLSearchParams(window.location.search);
      const urlRoomPrice = params.get('roomPrice');

      // 전역 함수로 가격 업데이트 함수 정의
      window.updateTotalPrice = function () {
        // 객실 가격 계산 - URL 파라미터 우선, 없으면 기본값
        const currentParams = new URLSearchParams(window.location.search);
        const currentRoomPrice = currentParams.get('roomPrice');
        let roomPrice = currentRoomPrice ? Number(currentRoomPrice) : 130000;

        console.log('가격 계산 - URL 파라미터:', currentRoomPrice, '최종 가격:', roomPrice);

        // 숙박 일수 계산
        const nights = parseInt(document.getElementById('total-nights').textContent) || 1;
        const totalRoomPrice = roomPrice * nights;

        console.log('가격 계산 - 숙박일수:', nights, '객실가격:', roomPrice, '총 객실가격:', totalRoomPrice);

        // 추가 옵션 가격 계산
        let optionsPrice = 0;

        // 바베큐 옵션
        const bbqToggle = document.getElementById('bbq-toggle');
        if (bbqToggle && bbqToggle.getAttribute('data-active') === 'true') {
          optionsPrice += 30000;
        }

        // 조식 옵션 (인원수와 관계없이 고정 가격)
        const breakfastToggle = document.getElementById('breakfast-toggle');
        if (breakfastToggle && breakfastToggle.getAttribute('data-active') === 'true') {
          optionsPrice += 15000; // 1인당 가격이지만 인원수와 관계없이 고정
        }

        // 와인 패키지
        const wineToggle = document.getElementById('wine-toggle');
        if (wineToggle && wineToggle.getAttribute('data-active') === 'true') {
          optionsPrice += 45000;
        }

        // 총 가격 계산 및 표시
        const totalPrice = totalRoomPrice + optionsPrice;

        console.log('최종 가격 계산 - 객실가격:', totalRoomPrice, '추가옵션:', optionsPrice, '총합:', totalPrice);

        // 가격 표시 업데이트
        const priceElements = {
          'room-price': totalRoomPrice,
          'options-price': optionsPrice,
          'total-price': totalPrice,
          'bottom-total-price': totalPrice
        };

        // 1박 가격 업데이트
        const nightlyPriceEl = document.getElementById('nightly-price');
        if (nightlyPriceEl) {
          nightlyPriceEl.textContent = `₩${roomPrice.toLocaleString()} / 1박`;
        }

        Object.entries(priceElements).forEach(([id, price]) => {
          const element = document.getElementById(id);
          if (element) {
            element.textContent = `₩${price.toLocaleString()}`;
          }
        });
      };

      // 초기 가격 계산 - DOM이 완전히 로드된 후 실행
      setTimeout(() => {
        updateTotalPrice();
      }, 200);
    });
  </script>
  <script id="hydrateRoomData">
    document.addEventListener('DOMContentLoaded', function () {
      const params = new URLSearchParams(window.location.search);
      const roomName = params.get('roomName');
      const roomPrice = params.get('roomPrice');
      const roomCapacity = params.get('roomCapacity');
      const roomArea = params.get('roomArea');
      const roomImg = params.get('roomImg');
      const roomId = params.get('roomId');

      console.log('쿼리스트링 데이터:', { roomName, roomPrice, roomCapacity, roomArea, roomImg, roomId });

      // 1) 상단 요약 이미지 · 제목 업데이트
      const summaryImg = document.querySelector('section.mb-6 img');
      const summaryTitle = document.querySelector('section.mb-6 h2');

      if (roomImg && summaryImg) {
        summaryImg.src = decodeURIComponent(roomImg);
        summaryImg.alt = roomName ? decodeURIComponent(roomName) : '숙소 이미지';
        console.log('상단 이미지 업데이트:', decodeURIComponent(roomImg));
      }

      if (roomName && summaryTitle) {
        summaryTitle.textContent = decodeURIComponent(roomName);
        console.log('상단 제목 업데이트:', decodeURIComponent(roomName));
      }

      // 2) 선택된 객실 정보 영역 업데이트 - 더 정확한 선택자 사용
      const selCard = document.querySelector('#selected-room-info');
      if (!selCard) {
        console.warn('선택된 객실 정보 카드를 찾을 수 없습니다. (#selected-room-info)');
        return;
      }

      const imgEl = selCard.querySelector('#selected-room-img');
      const nameEl = selCard.querySelector('#selected-room-name');
      const areaEl = selCard.querySelector('#selected-room-area');
      const capacityEl = selCard.querySelector('#selected-room-capacity');
      const priceEl = selCard.querySelector('#selected-room-price');
      const hidden = selCard.querySelector('#selected-room-type');

      // 이미지 업데이트
      if (roomImg && imgEl) {
        imgEl.src = decodeURIComponent(roomImg);
        imgEl.alt = roomName ? decodeURIComponent(roomName) : '객실 이미지';
        console.log('객실 이미지 업데이트:', decodeURIComponent(roomImg));
      }

      // 객실명 업데이트
      if (roomName && nameEl) {
        nameEl.textContent = decodeURIComponent(roomName);
        console.log('객실명 업데이트:', decodeURIComponent(roomName));
      }

      // 면적 정보 업데이트
      if (roomArea && areaEl) {
        areaEl.textContent = `면적: ${decodeURIComponent(roomArea)}`;
        console.log('면적 업데이트:', decodeURIComponent(roomArea));
      }

      // 수용 인원 업데이트
      if (roomCapacity && capacityEl) {
        capacityEl.textContent = decodeURIComponent(roomCapacity);
        console.log('수용 인원 업데이트:', decodeURIComponent(roomCapacity));
      }

      // 가격 정보 업데이트
      if (roomPrice && priceEl) {
        const num = Number(roomPrice);
        priceEl.textContent = `₩${num.toLocaleString()} / 1박`;
        console.log('객실 가격 업데이트:', num);

        // 1박 가격도 업데이트
        const nightlyPriceEl = document.getElementById('nightly-price');
        if (nightlyPriceEl) {
          nightlyPriceEl.textContent = `₩${num.toLocaleString()} / 1박`;
          console.log('1박 가격 업데이트:', num);
        }
      }

      // 숨겨진 객실 타입 업데이트
      if (roomId && hidden) {
        hidden.value = roomId;
        console.log('객실 타입 업데이트:', roomId);
      }

      // 3) 객실 특징 업데이트 (객실 타입에 따라)
      const featuresContainer = selCard.querySelector('#selected-room-features');
      if (featuresContainer && roomId) {
        const features = getRoomFeatures(roomId);
        featuresContainer.innerHTML = features.map(feature =>
          `<span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-600">${feature}</span>`
        ).join('');
        console.log('객실 특징 업데이트:', features);
      }

      // 4) 가격 계산 함수 호출 (객실 정보 업데이트 후)
      setTimeout(() => {
        if (window.updateTotalPrice) {
          window.updateTotalPrice();
          console.log('가격 계산 함수 실행 완료');
        }
      }, 100);
    });

    // 객실 타입별 특징 반환 함수
    function getRoomFeatures(roomId) {
      const featuresMap = {
        'premium': ['퀸 사이즈 침대', '소파베드', '욕실', '테라스', '전용 주차'],
        'standard': ['퀸 사이즈 침대', '욕실', '기본 편의시설'],
        'family': ['퀸 사이즈 침대 2개', '소파베드', '욕실', '대형 테라스', '전용 주차'],
        'dome': ['퀸 사이즈 침대', '욕실', '스타게이징 돔', '로맨틱 분위기'],
        'treehouse': ['퀸 사이즈 침대', '욕실', '숲 전망', '고급스러운 인테리어'],
        'deluxe': ['퀸 사이즈 침대', '욕실', '프리미엄 편의시설']
      };

      return featuresMap[roomId] || ['퀸 사이즈 침대', '욕실'];
    }
  </script>
</body>

</html>